<!DOCTYPE html>
<html>
  <head>
      <meta name="viewport" content= "width=device-width, user-scalable=no">
    <style>
    .background {
  fill: none;
  pointer-events: all;
}

#districts {
  fill: #aaa;
}

#districts .active {
  fill: orange;
}

#district-borders {
  fill: none;
  stroke: #fff;
  stroke-width: 1.5px;
  stroke-linejoin: round;
  stroke-linecap: round;
  pointer-events: none;
}

div{
	width: 25vh;
        font-size: 2vh;
        height: 10vh;
        line-height: 3vh;
        padding : 2vh 1vh 2vh 1vh;
        background: #673AB7;
        box-shadow: 0 0 10px #673AB7;
        /* border: 10px solid #9c27b036; */
        color: white;
        border-radius: 1vw;
        transition : 200ms;
        z-index : 100;
}

    </style>
  </head>
  <body>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.20/topojson.min.js"></script>
    <script>
 
 var tooltip = d3.select("body")
  .append("div")
    .style("position", "absolute")
    .style("visibility","hidden")
    .text("I'm a circle!");

var width = 960,
    height = 500;

var projection = d3.geoMercator()
    .scale(1000)
	.translate([-width, height*1.5]);
	

var path = d3.geoPath()
    .projection(projection);


var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)
    .call(d3.zoom().on("zoom", function () {
              svg.attr("transform", d3.event.transform)
         }));


var g = svg.append("g");

d3.json("js/districtsTopo.json", function(error, topology) {
  if (error) throw error;

  g.append("g")
      .attr("id", "districts")
    .selectAll("path")
      .data(topojson.feature(topology, topology.objects.IND_adm2).features)
    .enter().append("path")
	  .attr("d", path)
	  .on("mouseover",function(d){
              // if(d.properties.ID_2 > 272)
              // d3.select(this).attr(
              // "fill","blue");
              // else  d3.select(this).attr(
              // "fill","orange");
              tooltip.style("visibility", "visible");
              tooltip.style("top",event.pageY - 20 + "px");
              tooltip.style("left",event.pageX + 20 + "px");
              tooltip.text(d.properties.NAME_2  + " â†’ ");
              })

  g.append("path")
      .datum(topojson.mesh(topology, topology.objects.IND_adm2, function(a, b) { return a !== b; }))
      .attr("id", "district-borders")
      .attr("d", path);
});

// function clicked(d) {
//   var centroid = path.centroid(d),
//       translate = projection.translate();

//   projection.translate([
//     translate[0] - centroid[0] + width / 2,
//     translate[1] - centroid[1] + height / 2
//   ]);

//   zoom.translate(projection.translate());

//   g.selectAll("path").transition()
//       .duration(700)
//       .attr("d", path);
// }

// function zoomed() {
//   projection.translate(d3.event.translate).scale(d3.event.scale);
//   g.selectAll("path").attr("d", path);
// }

    </script>

  </body>
</html>
